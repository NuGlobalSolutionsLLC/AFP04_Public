import{A as qe,aa as Ce,w as U,o as le,b as ae,g as J,r as T,c as _,ab as Re,ac as Se,ad as Fe,s as ie,n as Q,j as Me,ae as _e,U as Ee,h as M,u as X,T as Be,af as $e,e as Pe,x as ge,V as Te,_ as Ie,$ as Oe,D as De,M as je,E as Le,J as Ne,I as W,G as re,ag as Ue,S as Y,d as ze,v as Ke,a5 as Ze,O as He,Q as Qe}from"./index.9ed6ea46.js";import{Q as se,f as Ye,d as Ge,e as We}from"./QBtn.7173a0ab.js";import{a as Je,u as Xe}from"./use-dark.246e3b59.js";import{a as ee,c as Ae}from"./dom.eccd515b.js";import{b as et,u as tt,c as ot}from"./uid.17124ac1.js";import{Q as nt}from"./QCard.a26232c2.js";function lt({validate:e,resetValidation:t,requiresQForm:u}){const i=qe(Ce,!1);if(i!==!1){const{props:d,proxy:s}=J();Object.assign(s,{validate:e,resetValidation:t}),U(()=>d.disable,c=>{c===!0?(typeof t=="function"&&t(),i.unbindComponent(s)):i.bindComponent(s)}),le(()=>{d.disable!==!0&&i.bindComponent(s)}),ae(()=>{d.disable!==!0&&i.unbindComponent(s)})}else u===!0&&console.error("Parent QForm not found on useFormChild()!")}const he=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,pe=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,be=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,te=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,oe=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,ue={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>he.test(e),hexaColor:e=>pe.test(e),hexOrHexaColor:e=>be.test(e),rgbColor:e=>te.test(e),rgbaColor:e=>oe.test(e),rgbOrRgbaColor:e=>te.test(e)||oe.test(e),hexOrRgbColor:e=>he.test(e)||te.test(e),hexaOrRgbaColor:e=>pe.test(e)||oe.test(e),anyColor:e=>be.test(e)||te.test(e)||oe.test(e)},at=[!0,!1,"ondemand"],rt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:e=>at.includes(e)}};function ut(e,t){const{props:u,proxy:i}=J(),d=T(!1),s=T(null),c=T(null);lt({validate:q,resetValidation:m});let k=0,B;const w=_(()=>u.rules!==void 0&&u.rules!==null&&u.rules.length!==0),h=_(()=>u.disable!==!0&&w.value===!0),v=_(()=>u.error===!0||d.value===!0),z=_(()=>typeof u.errorMessage=="string"&&u.errorMessage.length!==0?u.errorMessage:s.value);U(()=>u.modelValue,()=>{L()}),U(()=>u.reactiveRules,j=>{j===!0?B===void 0&&(B=U(()=>u.rules,()=>{L(!0)})):B!==void 0&&(B(),B=void 0)},{immediate:!0}),U(e,j=>{j===!0?c.value===null&&(c.value=!1):c.value===!1&&(c.value=!0,h.value===!0&&u.lazyRules!=="ondemand"&&t.value===!1&&D())});function m(){k++,t.value=!1,c.value=null,d.value=!1,s.value=null,D.cancel()}function q(j=u.modelValue){if(h.value!==!0)return!0;const $=++k,V=t.value!==!0?()=>{c.value=!0}:()=>{},R=(C,x)=>{C===!0&&V(),d.value=C,s.value=x||null,t.value=!1},F=[];for(let C=0;C<u.rules.length;C++){const x=u.rules[C];let O;if(typeof x=="function"?O=x(j,ue):typeof x=="string"&&ue[x]!==void 0&&(O=ue[x](j)),O===!1||typeof O=="string")return R(!0,O),!1;O!==!0&&O!==void 0&&F.push(O)}return F.length===0?(R(!1),!0):(t.value=!0,Promise.all(F).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return $===k&&R(!1),!0;const x=C.find(O=>O===!1||typeof O=="string");return $===k&&R(x!==void 0,x),x===void 0},C=>($===k&&(console.error(C),R(!0)),!1)))}function L(j){h.value===!0&&u.lazyRules!=="ondemand"&&(c.value===!0||u.lazyRules!==!0&&j!==!0)&&D()}const D=Re(q,0);return ae(()=>{B!==void 0&&B(),D.cancel()}),Object.assign(i,{resetValidation:m,validate:q}),Se(i,"hasError",()=>v.value),{isDirtyModel:c,hasRules:w,hasError:v,errorMessage:z,validate:q,resetValidation:m}}const ye=/^on[A-Z]/;function it(e,t){const u={listeners:T({}),attributes:T({})};function i(){const d={},s={};for(const c in e)c!=="class"&&c!=="style"&&ye.test(c)===!1&&(d[c]=e[c]);for(const c in t.props)ye.test(c)===!0&&(s[c]=t.props[c]);u.attributes.value=d,u.listeners.value=s}return Fe(i),i(),u}let de=[],st=[];function ve(e){st.length===0?e():de.push(e)}function dt(e){de=de.filter(t=>t!==e)}function fe(e){return e===void 0?`f_${et()}`:e}function ce(e){return e!=null&&(""+e).length!==0}const ft={...Je,...rt,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},ct=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function vt(){const{props:e,attrs:t,proxy:u,vnode:i}=J();return{isDark:Xe(e,u.$q),editable:_(()=>e.disable!==!0&&e.readonly!==!0),innerLoading:T(!1),focused:T(!1),hasPopupOpen:!1,splitAttrs:it(t,i),targetUid:T(fe(e.for)),rootRef:T(null),targetRef:T(null),controlRef:T(null)}}function mt(e){const{props:t,emit:u,slots:i,attrs:d,proxy:s}=J(),{$q:c}=s;let k=null;e.hasValue===void 0&&(e.hasValue=_(()=>ce(t.modelValue))),e.emitValue===void 0&&(e.emitValue=o=>{u("update:modelValue",o)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:r,onFocusout:l}),Object.assign(e,{clearValue:f,onControlFocusin:r,onControlFocusout:l,focus:x}),e.computedCounter===void 0&&(e.computedCounter=_(()=>{if(t.counter!==!1){const o=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,y=t.maxlength!==void 0?t.maxlength:t.maxValues;return o+(y!==void 0?" / "+y:"")}}));const{isDirtyModel:B,hasRules:w,hasError:h,errorMessage:v,resetValidation:z}=ut(e.focused,e.innerLoading),m=e.floatingLabel!==void 0?_(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):_(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),q=_(()=>t.bottomSlots===!0||t.hint!==void 0||w.value===!0||t.counter===!0||t.error!==null),L=_(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),D=_(()=>`q-field row no-wrap items-start q-field--${L.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(m.value===!0?" q-field--float":"")+($.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(h.value===!0?" q-field--error":"")+(h.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&q.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),j=_(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(h.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),$=_(()=>t.labelSlot===!0||t.label!==void 0),V=_(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&h.value!==!0?` text-${t.labelColor}`:"")),R=_(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:m.value,modelValue:t.modelValue,emitValue:e.emitValue})),F=_(()=>{const o={for:e.targetUid.value};return t.disable===!0?o["aria-disabled"]="true":t.readonly===!0&&(o["aria-readonly"]="true"),o});U(()=>t.for,o=>{e.targetUid.value=fe(o)});function C(){const o=document.activeElement;let y=e.targetRef!==void 0&&e.targetRef.value;y&&(o===null||o.id!==e.targetUid.value)&&(y.hasAttribute("tabindex")===!0||(y=y.querySelector("[tabindex]")),y&&y!==o&&y.focus({preventScroll:!0}))}function x(){ve(C)}function O(){dt(C);const o=document.activeElement;o!==null&&e.rootRef.value.contains(o)&&o.blur()}function r(o){k!==null&&(clearTimeout(k),k=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,u("focus",o))}function l(o,y){k!==null&&clearTimeout(k),k=setTimeout(()=>{k=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,u("blur",o)),y!==void 0&&y())})}function f(o){ie(o),c.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),u("update:modelValue",null),u("clear",t.modelValue),Q(()=>{z(),c.platform.is.mobile!==!0&&(B.value=!1)})}function a(){const o=[];return i.prepend!==void 0&&o.push(M("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:X},i.prepend())),o.push(M("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},p())),h.value===!0&&t.noErrorIcon===!1&&o.push(A("error",[M(se,{name:c.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?o.push(A("inner-loading-append",i.loading!==void 0?i.loading():[M(Ye,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&o.push(A("inner-clearable-append",[M(se,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||c.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:f})])),i.append!==void 0&&o.push(M("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:X},i.append())),e.getInnerAppend!==void 0&&o.push(A("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&o.push(e.getControlChild()),o}function p(){const o=[];return t.prefix!==void 0&&t.prefix!==null&&o.push(M("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&o.push(e.getShadowControl()),e.getControl!==void 0?o.push(e.getControl()):i.rawControl!==void 0?o.push(i.rawControl()):i.control!==void 0&&o.push(M("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},i.control(R.value))),$.value===!0&&o.push(M("div",{class:V.value},ee(i.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&o.push(M("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),o.concat(ee(i.default))}function g(){let o,y;h.value===!0?v.value!==null?(o=[M("div",{role:"alert"},v.value)],y=`q--slot-error-${v.value}`):(o=ee(i.error),y="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(o=[M("div",t.hint)],y=`q--slot-hint-${t.hint}`):(o=ee(i.hint),y="q--slot-hint"));const Z=t.counter===!0||i.counter!==void 0;if(t.hideBottomSpace===!0&&Z===!1&&o===void 0)return;const S=M("div",{key:y,class:"q-field__messages col"},o);return M("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:X},[t.hideBottomSpace===!0?S:M(Be,{name:"q-transition--field-message"},()=>S),Z===!0?M("div",{class:"q-field__counter"},i.counter!==void 0?i.counter():e.computedCounter.value):null])}function A(o,y){return y===null?null:M("div",{key:o,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},y)}let b=!1;return Me(()=>{b=!0}),_e(()=>{b===!0&&t.autofocus===!0&&s.focus()}),le(()=>{Ee.value===!0&&t.for===void 0&&(e.targetUid.value=fe()),t.autofocus===!0&&s.focus()}),ae(()=>{k!==null&&clearTimeout(k)}),Object.assign(s,{focus:x,blur:O}),function(){const y=e.getControl===void 0&&i.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...F.value}:F.value;return M("label",{ref:e.rootRef,class:[D.value,d.class],style:d.style,...y},[i.before!==void 0?M("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:X},i.before()):null,M("div",{class:"q-field__inner relative-position col self-stretch"},[M("div",{ref:e.controlRef,class:j.value,tabindex:-1,...e.controlEvents},a()),q.value===!0?g():null]),i.after!==void 0?M("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:X},i.after()):null])}}const ke={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ne={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ve=Object.keys(ne);Ve.forEach(e=>{ne[e].regex=new RegExp(ne[e].pattern)});const gt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ve.join("")+"])|(.)","g"),we=/[.*+?^${}()|[\]\\]/g,P=String.fromCharCode(1),ht={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function pt(e,t,u,i){let d,s,c,k,B,w;const h=T(null),v=T(m());function z(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}U(()=>e.type+e.autogrow,L),U(()=>e.mask,r=>{if(r!==void 0)D(v.value,!0);else{const l=x(v.value);L(),e.modelValue!==l&&t("update:modelValue",l)}}),U(()=>e.fillMask+e.reverseFillMask,()=>{h.value===!0&&D(v.value,!0)}),U(()=>e.unmaskedValue,()=>{h.value===!0&&D(v.value)});function m(){if(L(),h.value===!0){const r=F(x(e.modelValue));return e.fillMask!==!1?O(r):r}return e.modelValue}function q(r){if(r<d.length)return d.slice(-r);let l="",f=d;const a=f.indexOf(P);if(a>-1){for(let p=r-f.length;p>0;p--)l+=P;f=f.slice(0,a)+l+f.slice(a)}return f}function L(){if(h.value=e.mask!==void 0&&e.mask.length!==0&&z(),h.value===!1){k=void 0,d="",s="";return}const r=ke[e.mask]===void 0?e.mask:ke[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",f=l.replace(we,"\\$&"),a=[],p=[],g=[];let A=e.reverseFillMask===!0,b="",o="";r.replace(gt,(I,n,E,H,K)=>{if(H!==void 0){const N=ne[H];g.push(N),o=N.negate,A===!0&&(p.push("(?:"+o+"+)?("+N.pattern+"+)?(?:"+o+"+)?("+N.pattern+"+)?"),A=!1),p.push("(?:"+o+"+)?("+N.pattern+")?")}else if(E!==void 0)b="\\"+(E==="\\"?"":E),g.push(E),a.push("([^"+b+"]+)?"+b+"?");else{const N=n!==void 0?n:K;b=N==="\\"?"\\\\\\\\":N.replace(we,"\\\\$&"),g.push(N),a.push("([^"+b+"]+)?"+b+"?")}});const y=new RegExp("^"+a.join("")+"("+(b===""?".":"[^"+b+"]")+"+)?"+(b===""?"":"["+b+"]*")+"$"),Z=p.length-1,S=p.map((I,n)=>n===0&&e.reverseFillMask===!0?new RegExp("^"+f+"*"+I):n===Z?new RegExp("^"+I+"("+(o===""?".":o)+"+)?"+(e.reverseFillMask===!0?"$":f+"*")):new RegExp("^"+I));c=g,k=I=>{const n=y.exec(e.reverseFillMask===!0?I:I.slice(0,g.length+1));n!==null&&(I=n.slice(1).join(""));const E=[],H=S.length;for(let K=0,N=I;K<H;K++){const G=S[K].exec(N);if(G===null)break;N=N.slice(G.shift().length),E.push(...G)}return E.length!==0?E.join(""):I},d=g.map(I=>typeof I=="string"?I:P).join(""),s=d.split(P).join(l)}function D(r,l,f){const a=i.value,p=a.selectionEnd,g=a.value.length-p,A=x(r);l===!0&&L();const b=F(A),o=e.fillMask!==!1?O(b):b,y=v.value!==o;a.value!==o&&(a.value=o),y===!0&&(v.value=o),document.activeElement===a&&Q(()=>{if(o===s){const S=e.reverseFillMask===!0?s.length:0;a.setSelectionRange(S,S,"forward");return}if(f==="insertFromPaste"&&e.reverseFillMask!==!0){const S=a.selectionEnd;let I=p-1;for(let n=B;n<=I&&n<S;n++)d[n]!==P&&I++;$.right(a,I);return}if(["deleteContentBackward","deleteContentForward"].indexOf(f)>-1){const S=e.reverseFillMask===!0?p===0?o.length>b.length?1:0:Math.max(0,o.length-(o===s?0:Math.min(b.length,g)+1))+1:p;a.setSelectionRange(S,S,"forward");return}if(e.reverseFillMask===!0)if(y===!0){const S=Math.max(0,o.length-(o===s?0:Math.min(b.length,g+1)));S===1&&p===1?a.setSelectionRange(S,S,"forward"):$.rightReverse(a,S)}else{const S=o.length-g;a.setSelectionRange(S,S,"backward")}else if(y===!0){const S=Math.max(0,d.indexOf(P),Math.min(b.length,p)-1);$.right(a,S)}else{const S=p-1;$.right(a,S)}});const Z=e.unmaskedValue===!0?x(o):o;String(e.modelValue)!==Z&&u(Z,!0)}function j(r,l,f){const a=F(x(r.value));l=Math.max(0,d.indexOf(P),Math.min(a.length,l)),B=l,r.setSelectionRange(l,f,"forward")}const $={left(r,l){const f=d.slice(l-1).indexOf(P)===-1;let a=Math.max(0,l-1);for(;a>=0;a--)if(d[a]===P){l=a,f===!0&&l++;break}if(a<0&&d[l]!==void 0&&d[l]!==P)return $.right(r,0);l>=0&&r.setSelectionRange(l,l,"backward")},right(r,l){const f=r.value.length;let a=Math.min(f,l+1);for(;a<=f;a++)if(d[a]===P){l=a;break}else d[a-1]===P&&(l=a);if(a>f&&d[l-1]!==void 0&&d[l-1]!==P)return $.left(r,f);r.setSelectionRange(l,l,"forward")},leftReverse(r,l){const f=q(r.value.length);let a=Math.max(0,l-1);for(;a>=0;a--)if(f[a-1]===P){l=a;break}else if(f[a]===P&&(l=a,a===0))break;if(a<0&&f[l]!==void 0&&f[l]!==P)return $.rightReverse(r,0);l>=0&&r.setSelectionRange(l,l,"backward")},rightReverse(r,l){const f=r.value.length,a=q(f),p=a.slice(0,l+1).indexOf(P)===-1;let g=Math.min(f,l+1);for(;g<=f;g++)if(a[g-1]===P){l=g,l>0&&p===!0&&l--;break}if(g>f&&a[l-1]!==void 0&&a[l-1]!==P)return $.leftReverse(r,f);r.setSelectionRange(l,l,"forward")}};function V(r){t("click",r),w=void 0}function R(r){if(t("keydown",r),$e(r)===!0)return;const l=i.value,f=l.selectionStart,a=l.selectionEnd;if(r.shiftKey||(w=void 0),r.keyCode===37||r.keyCode===39){r.shiftKey&&w===void 0&&(w=l.selectionDirection==="forward"?f:a);const p=$[(r.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(r.preventDefault(),p(l,w===f?a:f),r.shiftKey){const g=l.selectionStart;l.setSelectionRange(Math.min(w,g),Math.max(w,g),"forward")}}else r.keyCode===8&&e.reverseFillMask!==!0&&f===a?($.left(l,f),l.setSelectionRange(l.selectionStart,a,"backward")):r.keyCode===46&&e.reverseFillMask===!0&&f===a&&($.rightReverse(l,a),l.setSelectionRange(f,l.selectionEnd,"forward"))}function F(r){if(r==null||r==="")return"";if(e.reverseFillMask===!0)return C(r);const l=c;let f=0,a="";for(let p=0;p<l.length;p++){const g=r[f],A=l[p];if(typeof A=="string")a+=A,g===A&&f++;else if(g!==void 0&&A.regex.test(g))a+=A.transform!==void 0?A.transform(g):g,f++;else return a}return a}function C(r){const l=c,f=d.indexOf(P);let a=r.length-1,p="";for(let g=l.length-1;g>=0&&a>-1;g--){const A=l[g];let b=r[a];if(typeof A=="string")p=A+p,b===A&&a--;else if(b!==void 0&&A.regex.test(b))do p=(A.transform!==void 0?A.transform(b):b)+p,a--,b=r[a];while(f===g&&b!==void 0&&A.regex.test(b));else return p}return p}function x(r){return typeof r!="string"||k===void 0?typeof r=="number"?k(""+r):r:k(r)}function O(r){return s.length-r.length<=0?r:e.reverseFillMask===!0&&r.length!==0?s.slice(0,-r.length)+r:r+s.slice(r.length)}return{innerValue:v,hasMask:h,moveCursorForPaste:j,updateMaskValue:D,onMaskedKeydown:R,onMaskedClick:V}}function bt(e,t){function u(){const i=e.modelValue;try{const d="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(i)===i&&("length"in i?Array.from(i):[i]).forEach(s=>{d.items.add(s)}),{files:d.files}}catch{return{files:void 0}}}return t===!0?_(()=>{if(e.type==="file")return u()}):_(u)}const yt=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,kt=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,wt=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,xt=/[a-z0-9_ -]$/i;function Ct(e){return function(u){if(u.type==="compositionend"||u.type==="change"){if(u.target.qComposing!==!0)return;u.target.qComposing=!1,e(u)}else u.type==="compositionupdate"&&u.target.qComposing!==!0&&typeof u.data=="string"&&(Pe.is.firefox===!0?xt.test(u.data)===!1:yt.test(u.data)===!0||kt.test(u.data)===!0||wt.test(u.data)===!0)===!0&&(u.target.qComposing=!0)}}var xe=Ae({name:"QInput",inheritAttrs:!1,props:{...ft,...ht,...tt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ct,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:u}){const{proxy:i}=J(),{$q:d}=i,s={};let c=NaN,k,B,w=null,h;const v=T(null),z=ot(e),{innerValue:m,hasMask:q,moveCursorForPaste:L,updateMaskValue:D,onMaskedKeydown:j,onMaskedClick:$}=pt(e,t,b,v),V=bt(e,!0),R=_(()=>ce(m.value)),F=Ct(g),C=vt(),x=_(()=>e.type==="textarea"||e.autogrow===!0),O=_(()=>x.value===!0||["text","search","url","tel","password"].includes(e.type)),r=_(()=>{const n={...C.splitAttrs.listeners.value,onInput:g,onPaste:p,onChange:y,onBlur:Z,onFocus:ge};return n.onCompositionstart=n.onCompositionupdate=n.onCompositionend=F,q.value===!0&&(n.onKeydown=j,n.onClick=$),e.autogrow===!0&&(n.onAnimationend=A),n}),l=_(()=>{const n={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:z.value,...C.splitAttrs.attributes.value,id:C.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return x.value===!1&&(n.type=e.type),e.autogrow===!0&&(n.rows=1),n});U(()=>e.type,()=>{v.value&&(v.value.value=e.modelValue)}),U(()=>e.modelValue,n=>{if(q.value===!0){if(B===!0&&(B=!1,String(n)===c))return;D(n)}else m.value!==n&&(m.value=n,e.type==="number"&&s.hasOwnProperty("value")===!0&&(k===!0?k=!1:delete s.value));e.autogrow===!0&&Q(o)}),U(()=>e.autogrow,n=>{n===!0?Q(o):v.value!==null&&u.rows>0&&(v.value.style.height="auto")}),U(()=>e.dense,()=>{e.autogrow===!0&&Q(o)});function f(){ve(()=>{const n=document.activeElement;v.value!==null&&v.value!==n&&(n===null||n.id!==C.targetUid.value)&&v.value.focus({preventScroll:!0})})}function a(){v.value!==null&&v.value.select()}function p(n){if(q.value===!0&&e.reverseFillMask!==!0){const E=n.target;L(E,E.selectionStart,E.selectionEnd)}t("paste",n)}function g(n){if(!n||!n.target)return;if(e.type==="file"){t("update:modelValue",n.target.files);return}const E=n.target.value;if(n.target.qComposing===!0){s.value=E;return}if(q.value===!0)D(E,!1,n.inputType);else if(b(E),O.value===!0&&n.target===document.activeElement){const{selectionStart:H,selectionEnd:K}=n.target;H!==void 0&&K!==void 0&&Q(()=>{n.target===document.activeElement&&E.indexOf(n.target.value)===0&&n.target.setSelectionRange(H,K)})}e.autogrow===!0&&o()}function A(n){t("animationend",n),o()}function b(n,E){h=()=>{w=null,e.type!=="number"&&s.hasOwnProperty("value")===!0&&delete s.value,e.modelValue!==n&&c!==n&&(c=n,E===!0&&(B=!0),t("update:modelValue",n),Q(()=>{c===n&&(c=NaN)})),h=void 0},e.type==="number"&&(k=!0,s.value=n),e.debounce!==void 0?(w!==null&&clearTimeout(w),s.value=n,w=setTimeout(h,e.debounce)):h()}function o(){requestAnimationFrame(()=>{const n=v.value;if(n!==null){const E=n.parentNode.style,{scrollTop:H}=n,{overflowY:K,maxHeight:N}=d.platform.is.firefox===!0?{}:window.getComputedStyle(n),G=K!==void 0&&K!=="scroll";G===!0&&(n.style.overflowY="hidden"),E.marginBottom=n.scrollHeight-1+"px",n.style.height="1px",n.style.height=n.scrollHeight+"px",G===!0&&(n.style.overflowY=parseInt(N,10)<n.scrollHeight?"auto":"hidden"),E.marginBottom="",n.scrollTop=H}})}function y(n){F(n),w!==null&&(clearTimeout(w),w=null),h!==void 0&&h(),t("change",n.target.value)}function Z(n){n!==void 0&&ge(n),w!==null&&(clearTimeout(w),w=null),h!==void 0&&h(),k=!1,B=!1,delete s.value,e.type!=="file"&&setTimeout(()=>{v.value!==null&&(v.value.value=m.value!==void 0?m.value:"")})}function S(){return s.hasOwnProperty("value")===!0?s.value:m.value!==void 0?m.value:""}ae(()=>{Z()}),le(()=>{e.autogrow===!0&&o()}),Object.assign(C,{innerValue:m,fieldClass:_(()=>`q-${x.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:_(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:v,emitValue:b,hasValue:R,floatingLabel:_(()=>R.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||ce(e.displayValue)),getControl:()=>M(x.value===!0?"textarea":"input",{ref:v,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...l.value,...r.value,...e.type!=="file"?{value:S()}:V.value}),getShadowControl:()=>M("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(x.value===!0?"":" text-no-wrap")},[M("span",{class:"invisible"},S()),M("span",e.shadowText)])});const I=mt(C);return Object.assign(i,{focus:f,select:a,getNativeElement:()=>v.value}),Se(i,"nativeEl",()=>v.value),I}}),St=Ae({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:u}){const i=J(),d=T(null);let s=0;const c=[];function k(m){const q=typeof m=="boolean"?m:e.noErrorFocus!==!0,L=++s,D=(V,R)=>{u("validation"+(V===!0?"Success":"Error"),R)},j=V=>{const R=V.validate();return typeof R.then=="function"?R.then(F=>({valid:F,comp:V}),F=>({valid:!1,comp:V,err:F})):Promise.resolve({valid:R,comp:V})};return(e.greedy===!0?Promise.all(c.map(j)).then(V=>V.filter(R=>R.valid!==!0)):c.reduce((V,R)=>V.then(()=>j(R).then(F=>{if(F.valid===!1)return Promise.reject(F)})),Promise.resolve()).catch(V=>[V])).then(V=>{if(V===void 0||V.length===0)return L===s&&D(!0),!0;if(L===s){const{comp:R,err:F}=V[0];if(F!==void 0&&console.error(F),D(!1,R),q===!0){const C=V.find(({comp:x})=>typeof x.focus=="function"&&Ge(x.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function B(){s++,c.forEach(m=>{typeof m.resetValidation=="function"&&m.resetValidation()})}function w(m){m!==void 0&&ie(m);const q=s+1;k().then(L=>{q===s&&L===!0&&(e.onSubmit!==void 0?u("submit",m):m!==void 0&&m.target!==void 0&&typeof m.target.submit=="function"&&m.target.submit())})}function h(m){m!==void 0&&ie(m),u("reset"),Q(()=>{B(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){ve(()=>{if(d.value===null)return;const m=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),q=>q.tabIndex>-1);m!=null&&m.focus({preventScroll:!0})})}Te(Ce,{bindComponent(m){c.push(m)},unbindComponent(m){const q=c.indexOf(m);q>-1&&c.splice(q,1)}});let z=!1;return Me(()=>{z=!0}),_e(()=>{z===!0&&e.autofocus===!0&&v()}),le(()=>{e.autofocus===!0&&v()}),Object.assign(i.proxy,{validate:k,resetValidation:B,submit:w,reset:h,focus:v,getValidationComponents:()=>c}),()=>M("form",{class:"q-form",ref:d,onSubmit:w,onReset:h},ee(t.default))}});const Mt=Oe({name:"BaseLogin",setup(){const e=T(),t=T(),u=T(!0),i=De(),d=T(""),s=T(!1),c=je(),k=async w=>{const h=new TextEncoder().encode(w),v=await crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(v)).map(m=>m.toString(16).padStart(2,"0")).join("")};return{changePasswordvisibility(){u.value=!u.value},doLogin:async()=>{d.value="",s.value=!0,k(t.value).then(v=>console.log(v));const w=`https://database.deta.sh/v1/${i.DETA_ID}/${i.DETA_NAME}/items/${e.value}`,h="Username or password do not match.";fetch(w,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-API-Key":i.DETA_KEY}}).then(v=>{if(v.ok)return v.json();v.status===404&&(d.value=h,s.value=!1)}).then(v=>{v&&k(t.value).then(z=>{v.password===z?(i.saveLoginState(e.value),c.push("/")):(d.value=h,s.value=!1)})})},errors:d,isPwd:u,loginDisabled:s,password:t,username:e}}}),me=e=>(He("data-v-94e9392c"),e=e(),Qe(),e),_t=me(()=>Y("h4",null,"AFP4 Web-GIS",-1)),At=me(()=>Y("a",{href:"https://www.nuglobalsolutions.com/",target:"_blank"},[Y("img",{alt:"NGS Logo",src:"img/logo.png",class:"logo"})],-1)),Vt=me(()=>Y("legend",null,"Input credentials",-1)),qt={class:"buttons"};function Rt(e,t,u,i,d,s){return Le(),Ne("section",null,[W(nt,{dark:"",round:""},{default:re(()=>[_t,W(St,{autofocus:!0,onSubmit:Ue(e.doLogin,["prevent"])},{default:re(()=>[At,Y("fieldset",null,[Vt,W(xe,{filled:"",modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=c=>e.username=c),label:"Username"},null,8,["modelValue"]),W(xe,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=c=>e.password=c),filled:"",type:e.isPwd?"password":"text",label:"Password"},{append:re(()=>[W(se,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e.changePasswordvisibility},null,8,["name","onClick"])]),_:1},8,["modelValue","type"])]),ze(Y("div",{class:"errors"},Ze(e.errors),513),[[Ke,e.errors]]),Y("div",qt,[W(We,{label:"Login",type:"submit",color:"primary",class:"full-width",disabled:e.loginDisabled},null,8,["disabled"])])]),_:1},8,["onSubmit"])]),_:1})])}var It=Ie(Mt,[["render",Rt],["__scopeId","data-v-94e9392c"]]);export{It as default};
